<div class="video-page" *ngIf="video">

  

  <div class="video-wrapper">
    <video controls autoplay>
      <source [src]="videoService.getVideoUrl(video.id)" type="video/mp4">
      Your browser does not support video.
    </video>
  </div>

  <h2 class="video-title-main">{{ video.title }}</h2>

  <div class="video-meta">
    <div *ngIf="video.description" class="meta-row">
      <strong>Description:</strong> {{ video.description }}
    </div>

    <div *ngIf="video.tags?.length" class="meta-row">
      <strong>Tags:</strong> {{ video.tags.join(', ') }}
    </div>

    <div *ngIf="video.createdAt" class="meta-row">
      <strong>Created:</strong> {{ video.createdAt | date:'medium' }}
    </div>

    <div *ngIf="video.location" class="meta-row">
      <strong>Location:</strong> {{ video.location }}
    </div>
  </div>

  <div class="actions">
    <button
      (click)="like()"
      [class.active]="myReaction === 'like'">
      Like {{ likes }}
    </button>

    <button
      (click)="dislike()"
      [class.active]="myReaction === 'dislike'">
      Dislike {{ dislikes }}
    </button>
  </div>

  <hr>

  <h3 class="comments-title">Comments</h3>

  <div class="comment-form">
    <textarea
      [(ngModel)]="newComment"
      placeholder="Write a comment..."
      rows="3">
    </textarea>

    <button (click)="addComment()">
      Add comment
    </button>
  </div>

  <div class="comment-error" *ngIf="commentError">{{ commentError }}</div>
  <div *ngIf="loadingComments">Loading comments...</div>

  <div class="comments">
    <div class="comment" *ngFor="let c of comments">
      <div class="comment-author">{{ c.authorName || c.authorEmail }}</div>
      <div class="comment-text">{{ c.text }}</div>
      <div class="comment-date">
        {{ c.createdAt | date:'short' }}
      </div>
    </div>
  </div>

  <div class="pagination" *ngIf="totalPages > 1">
    <button (click)="prevPage()" [disabled]="page === 0">Prev</button>
    <span>Page {{ page + 1 }} / {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="page + 1 >= totalPages">Next</button>
  </div>

</div>
